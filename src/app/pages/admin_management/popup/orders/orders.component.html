<div class="modal-header">
    <h4 class="modal-title">{{ title }}</h4>
    <button type="button" class="close" aria-label="Close" (click)="activeModal.dismiss('Cross click')">
        <span aria-hidden="true">&times;</span>
    </button>
</div>

<!-- Modal Body: Client Information -->
<div class="modal-body">
    <div class="container p-3" style="background-color: #f8f9fa; border-radius: 10px; box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);">
        <!-- Client Information Row -->
        <div class="row mb-2">
            <div class="col-md-6 d-flex align-items-center">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" style="color: #4e73df;" fill="currentColor" class="bi bi-person-circle mr-2" viewBox="0 0 16 16">
                    <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0"/>
                    <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8m8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1"/>
                </svg>
                <h6 class="m-0"><strong>Client Name:</strong> {{ this.obj.user.firstName + ' ' + this.obj.user.lastName }}</h6>
            </div>
            <div class="col-md-6 d-flex align-items-center">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" style="color: #4e73df;" fill="currentColor" class="bi bi-envelope mr-2" viewBox="0 0 16 16">
                    <path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1zm13 2.383-4.708 2.825L15 11.105zm-.034 6.876-5.64-3.471L8 9.583l-1.326-.795-5.64 3.47A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.741M1 11.105l4.708-2.897L1 5.383z"/>
                </svg>
                <h6 class="m-0"><strong>Email:</strong> {{ this.obj.user.email }}</h6>
            </div>
        </div>
    
        <!-- Contact Information Row -->
        <div class="row mb-2">
            <div class="col-md-6 d-flex align-items-center">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" style="color: #4e73df;" fill="currentColor" class="bi bi-telephone mr-2" viewBox="0 0 16 16">
                    <path d="M3.654 1.328a.678.678 0 0 0-1.015-.063L1.605 2.3c-.483.484-.661 1.169-.45 1.77a17.6 17.6 0 0 0 4.168 6.608 17.6 17.6 0 0 0 6.608 4.168c.601.211 1.286.033 1.77-.45l1.034-1.034a.678.678 0 0 0-.063-1.015l-2.307-1.794a.68.68 0 0 0-.58-.122l-2.19.547a1.75 1.75 0 0 1-1.657-.459L5.482 8.062a1.75 1.75 0 0 1-.46-1.657l.548-2.19a.68.68 0 0 0-.122-.58z"/>
                </svg>
                <h6 class="m-0"><strong>Phone Number:</strong> {{ this.obj.user.phone }}</h6>
            </div>
            <div class="col-md-6 d-flex align-items-center">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" style="color: #4e73df;" fill="currentColor" class="bi bi-pin-map mr-2" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M3.1 11.2a.5.5 0 0 1 .4-.2H6a.5.5 0 0 1 0 1H3.75L1.5 15h13l-2.25-3H10a.5.5 0 0 1 0-1h2.5a.5.5 0 0 1 .4.2l3 4a.5.5 0 0 1-.4.8H.5a.5.5 0 0 1-.4-.8z"/>
                    <path fill-rule="evenodd" d="M8 1a3 3 0 1 0 0 6 3 3 0 0 0 0-6M4 4a4 4 0 1 1 4.5 3.969V13.5a.5.5 0 0 1-1 0V7.97A4 4 0 0 1 4 3.999z"/>
                </svg>
                <h6 class="m-0"><strong>Address:</strong> {{ this.obj.user.address }}</h6>
            </div>
        </div>
    
        <!-- Status Information Row -->
        <div class="row mb-2">
            <div class="col-md-6 d-flex align-items-center">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" style="color: #4e73df;" fill="currentColor" class="bi bi-clipboard2-data mr-2" viewBox="0 0 16 16">
                    <path d="M9.5 0a.5.5 0 0 1 .5.5.5.5 0 0 0 .5.5.5.5 0 0 1 .5.5V2a.5.5 0 0 1-.5.5h-5A.5.5 0 0 1 5 2v-.5a.5.5 0 0 1 .5-.5.5.5 0 0 0 .5-.5.5.5 0 0 1 .5-.5z"/>
                    <path d="M3 2.5a.5.5 0 0 1 .5-.5H4a.5.5 0 0 0 0-1h-.5A1.5 1.5 0 0 0 2 2.5v12A1.5 1.5 0 0 0 3.5 16h9a1.5 1.5 0 0 0 1.5-1.5v-12A1.5 1.5 0 0 0 12.5 1H12a.5.5 0 0 0 0 1h.5a.5.5 0 0 1 .5.5v12a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5z"/>
                    <path d="M10 7a1 1 0 1 1 2 0v5a1 1 0 1 1-2 0zm-6 4a1 1 0 1 1 2 0v1a1 1 0 1 1-2 0zm4-3a1 1 0 0 0-1 1v3a1 1 0 1 0 2 0V9a1 1 0 0 0-1-1"/>
                </svg>
                <h6 class="m-0"><strong>Status:</strong> 
                    &nbsp;&nbsp;&nbsp;&nbsp;
                    <span *ngIf="this.obj.status === 1" class="badge badge-primary">Pending</span>
<span *ngIf="this.obj.status === 2" class="badge badge-warning">In progress</span>
<span *ngIf="this.obj.status === 3" class="badge badge-success">Confirmed</span>
<span *ngIf="this.obj.status === 4" class="badge badge-danger">Cancelled</span>
<span *ngIf="this.obj.status === 5" class="badge badge-info">Ready to taken</span>
<span *ngIf="this.obj.status === 6" class="badge badge-dark">Taken</span>

                </h6>
            </div>

        </div>
    </div>
    
</div>


  <!-- Modal Body: Table -->
  <div *ngIf="obj" class="modal-body d-flex justify-content-center">
    <div class="table-responsive" style="max-width: 700px;">
        <table class="table table-bordered align-middle text-center" style="border: 1px solid black; border-radius: 10px;">
            <thead style="background-color: #4e73df; color: white; border-radius: 10px;">
                <tr>
                    <th scope="col">NÂ°</th>
                    <th scope="col">Name</th>
                    <th scope="col">category</th>
                    <th scope="col">QTY</th>
                    <th scope="col">Price</th>
                    <th scope="col">TVA</th>
                    <th scope="col">Total Price</th>
                </tr>
            </thead>
            <tbody  >
                <ng-container *ngFor="let item of this.obj.orderLines">
                <tr>
                    <td>{{ item.id }}</td>
                    <td>{{ item.product.name}}</td>
                    <td>{{ item.product.category.name}}</td>
                    <td>{{ item.quantity}}</td>
                    <td style="background-color: #f8f9fc;">{{ item.totalPriceHT + ' DT' }}</td>
                    <td style="background-color: #f8f9fc;">{{ item.totalVatAmount + ' DT' }}</td>
                    <td style="background-color: #f8f9fc;">{{ item.totalPriceTTC + ' DT' }}</td>


                </tr>
            </ng-container>

            <tr>
                <td style="text-align: center;" colspan="6">
                    Total amount TTC
                </td>
                <td style="background-color: rgb(119, 177, 157);">
                   {{  this.sommeTTc | number:'1.2-2'}}DT
                </td>

            </tr>
                <tr>
                    <td style="text-align: center;" colspan="6">
                        Total amount TTC + Delivery Fee
                    </td>
                    <td style="background-color: aquamarine;">
                       {{ this.somme | number:'1.2-2'}}DT
                    </td>

                </tr>
            </tbody>
        </table>
    </div>

 </div>
  
  <!-- Modal Footer -->
  <div class="modal-footer">
    <button  type="button" *ngIf="this.obj.status === 3 && this.userRole.role === 'STORE'"  (click)="openAffected(this.obj.id,5)" class="btn btn-primary">Ready to taken</button>
    <button  type="button" *ngIf="this.obj.status === 5 && this.userRole.role === 'STORE'"  (click)="openAffected(this.obj.id,4)" class="btn btn-danger">Cancelled</button>
    <button type="button" class="btn btn-outline-dark" (click)="activeModal.close('Close click')">Fermer</button>
  </div>
  